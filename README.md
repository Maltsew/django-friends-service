# django-friends-service
---
Этот сервис предоставляет возможность зарегистрироваться новому пользователю, управлять своими дружескими отношениями с другими пользователями и просматривать список своих друзей. Все операции осуществляются через REST API.
------------------------------------------------------------------------
------------------------------------------------------------------------
Сервис разработан в соответствии со спецификацией OpenAPI
------------------------------------------------------------------------
Спецификация в формате yaml доступна в каталоге friends_openapi_spec/
friendsAPI_spec.yaml

Список необходимых библиотек и пакетов для запуска
------------------------------------------------------------------------
Сервис создан с использованием языка программирования Python и фреймворка Django. Для реализации REST API используется Django REST Framework. Сервис базируется на базе данных PostgreSQL, но может быть настроен на использование других баз данных, таких MySQL.

Инструкции по установке
-------------------------------------------
1. Загрузить из репозитория сервис с помощью git clone
```bash
git clone https://github.com/Maltsew/django-friends-service.git
```
2. Перейти в каталог с приложением:
```bash
 cd django-friends-service
 ``` 
3. Создать виртуальное окружение с помощью python. Если виртуальное окружение не установлен, сначала устаноить его:

```bash
sudo apt install python3-venv
```
4. В катологе с приложением создать виртуальное окружение :
```bash
python3 -m venv venv
```

5. Далее необходимо активировать виртуальное окружение:
```bash
source venv/bin/activate.
```
После активации, название виртуального окружения будет добавлено перед переменной $PATH.
```bash 
(venv) $
```
После того, как виртуальное окружение установлено и активировано, необходимо установить все зависимости проекта с помощью пакетного менеджера pip.

6. Для установки зависимых файлов можно воспользоваться системой управления пакетами
pip. Для этого использовать команду в консоли:
```bash
pip -r install requirements.txt
```

7. После успешной установки необходимо произвести миграции базы данных Django.
```bash
python manage.py makemigrations
python manage.py migrate
```
8. Для работы с админ-панелью создать суперпользователя:
```bash
python manage.py createsuperuser
```
9. Для запуска локального django-сервера выполнить команду:
```bash
python manage.py runserver
```
------------------------------------------------------------------------

После запуска сервера, вы можете отправлять запросы на эндпоинты сервиса, используя ваш любимый инструмент для работы с REST API (например, curl, httpie, Postman).

------------------------------------------------------------------------
Примеры запросов
------------------------------------------------------------------------
Регистрация нового пользователя

Пользователи могут зарегистрироваться, чтобы получить доступ к функциям сервиса. Для регистрации необходимо указать имя пользователя и пароль. После регистрации пользователи могут авторизоваться и использовать сервис.
```
curl -X 'POST' \
  'https://localhost:8000/api/v1/register' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "username": "user1"
}'
```
Отправка заявки в друзья другому пользователю


Пользователи могут создавать заявки в друзья другим пользователям. Для создания заявки необходимо указать имя пользователя, которому вы хотите отправить заявку.

Пользователи могут добавлять и удалять других пользователей из своего списка друзей. Для добавления друга необходимо указать имя пользователя. Для удаления друга необходимо указать идентификатор друга.
```
curl -X 'POST' \
  'http://localhost:8000/api/v1/friend-requests/5' \
  -H 'accept: application/json' \
  -d ''
```
Принять заявку в друзья
```
curl -X 'PUT' \
  'http://localhost:8000/api/v1/friend-requests/1/accept' \
  -H 'accept: application/json'
```
Отклонить заявку
```
curl -X 'PUT' \
  'http://localhost:8000/api/v1/friend-requests/1/reject' \
  -H 'accept: application/json'
```
Получить входящие заявки в друзья
```
curl -X 'GET' \
  'http://localhost:8000/api/v1/friend-requests/incoming?user_id=5' \
  -H 'accept: application/json'
```
Получить исходящие заявки в друзья
```
curl -X 'GET' \
  'http://localhost:8000/api/v1/friend-requests/outgoing?user_id=5' \
  -H 'accept: application/json'
```
Получить список друзей

Пользователи могут просмотреть список своих друзей. Список друзей включает в себя имя пользователя.
```
curl -X 'GET' \
  'http://localhost:8000/api/v1/friends?user_id=1' \
  -H 'accept: application/json'
```
Получить статус дружбы с другим пользователем из заранее опредленного списка:
[Нет ничего, Есть исходящая заявка, Есть входящая заявка, Уже друзья]
```
curl -X 'GET' \
  'http://localhost:8000/api/v1/friendship-status?user_id=6' \
  -H 'accept: application/json'
```
Удалить друга из списка друзей
```
curl -X 'DELETE' \
  'http://localhost:8000/api/v1/friends/1?user_id=2' \
  -H 'accept: application/json'
```